# Demo Application - Spring Boot + React Single JAR

Application full-stack avec **Spring Boot 3**, **React (Vite)**, **Oracle Database**, et authentification **JWT**, packagÃ©e dans un seul fichier JAR.

## ğŸ—ï¸ Architecture

```
project/
â”œâ”€â”€ pom.xml                          # Configuration Maven (build frontend + backend)
â”œâ”€â”€ src/main/
â”‚   â”œâ”€â”€ java/com/example/demo/
â”‚   â”‚   â”œâ”€â”€ DemoApplication.java     # Point d'entrÃ©e Spring Boot
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java  # Configuration Spring Security
â”‚   â”‚   â”‚   â””â”€â”€ WebConfig.java       # CORS & SPA routing
â”‚   â”‚   â”œâ”€â”€ security/
â”‚   â”‚   â”‚   â”œâ”€â”€ JwtUtil.java         # GÃ©nÃ©ration/validation JWT
â”‚   â”‚   â”‚   â””â”€â”€ JwtAuthenticationFilter.java
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.java  # POST /api/auth/login
â”‚   â”‚   â”‚   â””â”€â”€ DataController.java  # GET /api/data
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â””â”€â”€ MyEntity.java        # EntitÃ© JPA (table Oracle)
â”‚   â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”‚   â””â”€â”€ MyRepository.java    # Repository avec requÃªte conditionnelle
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ LoginRequest.java
â”‚   â”‚       â””â”€â”€ LoginResponse.java
â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â””â”€â”€ application.properties   # Config Oracle & JWT
â”‚   â””â”€â”€ frontend/                    # Application React
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ vite.config.js
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ App.jsx
â”‚           â”œâ”€â”€ pages/
â”‚           â”‚   â”œâ”€â”€ LoginPage.jsx
â”‚           â”‚   â””â”€â”€ DataPage.jsx
â”‚           â””â”€â”€ index.css
```

## ğŸš€ PrÃ©requis

- **Java 17+**
- **Maven 3.8+** (ou utilisez le Maven Wrapper)
- **Base de donnÃ©es Oracle** (XE ou autre)

## âš™ï¸ Configuration

1. **Base de donnÃ©es Oracle** : Modifiez `src/main/resources/application.properties` :

```properties
spring.datasource.url=jdbc:oracle:thin:@//localhost:1521/XEPDB1
spring.datasource.username=VOTRE_USER
spring.datasource.password=VOTRE_PASSWORD
```

2. **Structure de la table Oracle** :

```sql
CREATE TABLE MY_TABLE (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(255),
    DESCRIPTION VARCHAR2(500),
    STATUS VARCHAR2(50)
);

-- DonnÃ©es de test
INSERT INTO MY_TABLE (NAME, DESCRIPTION, STATUS) VALUES ('Item 1', 'Description 1', 'ACTIVE');
INSERT INTO MY_TABLE (NAME, DESCRIPTION, STATUS) VALUES ('Item 2', 'Description 2', 'INACTIVE');
```

## ğŸ”¨ Build

Pour construire le JAR unique contenant le frontend et le backend :

```bash
mvn clean install -DskipTests
```

Le JAR sera gÃ©nÃ©rÃ© dans `target/demo-0.0.1-SNAPSHOT.jar`.

## â–¶ï¸ ExÃ©cution

```bash
java -jar target/demo-0.0.1-SNAPSHOT.jar
```

L'application sera accessible sur **http://localhost:8080**.

## ğŸ” Authentification

- **Endpoint** : `POST /api/auth/login`
- **Utilisateur de test** : `admin` / `password`

```bash
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"password"}'
```

RÃ©ponse :
```json
{"token":"eyJhbGciOiJIUzI1NiJ9..."}
```

## ğŸ“Š API DonnÃ©es

- **Endpoint** : `GET /api/data` (protÃ©gÃ© par JWT)
- **ParamÃ¨tre optionnel** : `condition` (filtre sur le statut)

```bash
curl http://localhost:8080/api/data \
  -H "Authorization: Bearer <TOKEN>"

# Avec filtre
curl "http://localhost:8080/api/data?condition=ACTIVE" \
  -H "Authorization: Bearer <TOKEN>"
```

## ğŸ› ï¸ DÃ©veloppement

Pour le dÃ©veloppement avec hot-reload du frontend :

1. **Backend** (terminal 1) :
```bash
mvn spring-boot:run
```

2. **Frontend** (terminal 2) :
```bash
cd src/main/frontend
npm install
npm run dev
```

Le frontend sera sur `http://localhost:5173` avec proxy vers le backend.

## ğŸ“¦ Comment Ã§a marche (Single JAR)

1. **frontend-maven-plugin** : Installe Node/NPM localement et exÃ©cute `npm run build`
2. **maven-resources-plugin** : Copie le dossier `dist` vers `target/classes/static`
3. **spring-boot-maven-plugin** : Package tout dans un JAR exÃ©cutable
4. **Spring Boot** : Sert les fichiers statiques depuis le classpath (`/static`)
